<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>RESUMOS</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body class="text-slate-300">

    <div class="relative min-h-screen md:flex">
        <!-- Overlay para menu mobile -->
        <div id="mobile-overlay" class="fixed inset-0 bg-black/60 z-10 hidden md:hidden"></div>

        <!-- Sidebar -->
        <aside id="sidebar" class="sidebar w-64 text-slate-100 p-4 flex-shrink-0 flex flex-col fixed inset-y-0 left-0 transform -translate-x-full md:relative md:translate-x-0 transition-transform duration-300 ease-in-out z-20">
            <div class="border-b border-slate-600 pb-4 text-center">
                <h1 class="text-xl font-bold text-white">PORTAL DE ESTUDOS</h1>
                <p class="text-xs text-amber-400 font-semibold tracking-widest">RATIO, HONOR ET JUSTITIA</p>
            </div>
            <nav id="subject-nav" class="mt-6 flex-1 overflow-y-auto space-y-2">
                <!-- Links das mat√©rias ser√£o inseridos aqui pelo JS -->
            </nav>
            <div class="mt-4 pt-4 border-t border-slate-600">
                <h3 class="text-sm font-semibold text-slate-400 uppercase tracking-wider px-2 mb-2">Pr√≥ximas Revis√µes</h3>
                <ul id="upcoming-reviews-list" class="space-y-2 text-sm">
                    <!-- Revis√µes futuras ser√£o inseridas aqui -->
                </ul>
            </div>
        </aside>

        <!-- Main Content -->
        <main class="flex-1 overflow-y-auto">
            <header class="flex justify-between items-center mb-8 p-6 sm:p-8 pb-0">
                 <h2 id="main-title" class="text-3xl font-bold text-slate-100">Selecione um Resumo</h2>
                 <!-- Bot√£o Hamburguer para Mobile -->
                 <button id="mobile-menu-button" class="md:hidden p-2 rounded-md text-slate-300 hover:bg-slate-700">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16m-7 6h7"></path></svg>
                 </button>
            </header>
            
            <div id="content-area" class="p-6 sm:p-8">
                 <div class="content-card p-8 text-center border-dashed border-2 border-slate-600">
                    <span class="text-5xl">üõ°Ô∏è</span>
                    <h3 class="text-2xl font-bold mt-4 text-white">PREPARA√á√ÉO DE ALTO N√çVEL</h3>
                    <p class="mt-2 text-slate-400">Bem-vindo ao seu portal de estudos. Utilize o menu para navegar entre as mat√©rias e acessar os resumos.</p>
                </div>
            </div>
        </main>
    </div>

    <script>
        // --- BANCO DE DADOS DOS RESUMOS ---
        const studyData = {
            subjects: [
                { 
                    id: 'portugues', 
                    name: 'Portugu√™s', 
                    summaries: [
                        {
                            id: 'morfologia-classes-de-palavras',
                            title: 'Morfologia',
                            content: `
                                <div class="space-y-8">
                                    <!-- Introdu√ß√£o -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h2 class="text-2xl font-bold text-white mb-4 border-b border-slate-600 pb-2">Introdu√ß√£o √† Morfologia</h2>
                                        <p class="text-slate-300 mb-4">A Morfologia √© o campo da gram√°tica que estuda as palavras de forma isolada, analisando sua estrutura, forma√ß√£o e, principalmente, sua classifica√ß√£o. Enquanto a Sintaxe se preocupa com a fun√ß√£o das palavras dentro de uma frase, a Morfologia foca em "quem" cada palavra √©.</p>
                                        <div class="bg-slate-800 border border-slate-700 text-slate-200 p-4 rounded-md">
                                            <h4 class="font-semibold text-amber-400 mb-2">As 10 Classes Gramaticais:</h4>
                                            <ol class="grid grid-cols-2 sm:grid-cols-3 gap-2 list-inside list-decimal">
                                                <li>Substantivo</li>
                                                <li>Artigo</li>
                                                <li>Adjetivo</li>
                                                <li>Numeral</li>
                                                <li>Pronome</li>
                                                <li>Verbo</li>
                                                <li>Adv√©rbio</li>
                                                <li>Preposi√ß√£o</li>
                                                <li>Conjun√ß√£o</li>
                                                <li>Interjei√ß√£o</li>
                                            </ol>
                                        </div>
                                    </div>

                                    <!-- Substantivo -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">1. Substantivo</h3>
                                        <p class="text-slate-400 mb-4">√â a palavra que d√° nome aos seres, coisas, lugares, ideias e sentimentos. √â uma classe vari√°vel (g√™nero, n√∫mero, grau).</p>
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md">
                                            <h4 class="font-semibold mb-2">üí° Aten√ß√£o para Concursos: Substantiva√ß√£o!</h4>
                                            <p>√â o processo em que uma palavra de outra classe √© usada como substantivo, geralmente precedida por um artigo. Ex: "N√£o aceito um <strong class="text-white">n√£o</strong> de voc√™." (adv√©rbio vira substantivo).</p>
                                        </div>
                                    </div>

                                    <!-- Artigo -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">2. Artigo</h3>
                                        <p class="text-slate-400 mb-4">Palavra que antecede o substantivo para defini-lo (o, a) ou indefini-lo (um, uma).</p>
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md">
                                            <h4 class="font-semibold mb-2">üí° Aten√ß√£o para Concursos: Uso Facultativo!</h4>
                                            <p>O uso do artigo √© opcional antes de nomes pr√≥prios ("<strong class="text-white">A</strong> Bruna chegou") e pronomes possessivos ("<strong class="text-white">O</strong> seu concurso ser√°...").</p>
                                        </div>
                                    </div>

                                    <!-- Adjetivo -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">3. Adjetivo</h3>
                                        <p class="text-slate-400 mb-4">Palavra que expressa qualidade, caracter√≠stica ou estado do substantivo. <strong class="text-amber-400">Locu√ß√£o Adjetiva:</strong> preposi√ß√£o + substantivo (Ex: amor <strong class="text-white">de m√£e</strong> = materno).</p>
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md">
                                            <h4 class="font-semibold mb-2">üí° Aten√ß√£o para Concursos: Posi√ß√£o do Adjetivo!</h4>
                                            <p>A posi√ß√£o pode mudar o sentido: "<strong class="text-white">velhas casas</strong>" (antigas) vs. "<strong class="text-white">casas velhas</strong>" (em mau estado). E tamb√©m a classe: "<strong class="text-white">certos lugares</strong>" (pronome) vs. "<strong class="text-white">lugares certos</strong>" (adjetivo).</p>
                                        </div>
                                    </div>

                                    <!-- Adv√©rbio -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">4. Adv√©rbio</h3>
                                        <p class="text-slate-400 mb-4">Palavra invari√°vel que modifica um verbo, adjetivo ou outro adv√©rbio, indicando uma circunst√¢ncia (lugar, tempo, modo, etc.).</p>
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md">
                                            <h4 class="font-semibold mb-2">üí° Aten√ß√£o para Concursos: Valor Sem√¢ntico!</h4>
                                            <p>As bancas exploram o sentido. Ex: "<strong class="text-white">J√°</strong> um celular..." pode indicar oposi√ß√£o, n√£o tempo. O contexto √© crucial!</p>
                                        </div>
                                    </div>
                                    
                                    <!-- Demais Classes -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-4 text-center">Outras Classes Gramaticais</h3>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">5. Numeral</h4>
                                                <p class="text-sm">Indica quantidade (cardinal: um, dois) ou ordem (ordinal: primeiro, segundo). <strong class="text-red-400">Cuidado:</strong> "num" √© "em + um (artigo)", n√£o "em + um (numeral)".</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">6. Pronome</h4>
                                                <p class="text-sm">Substitui ou acompanha o substantivo. <strong class="text-red-400">Dica:</strong> O "que" √© pronome relativo se puder ser trocado por "o qual" e suas varia√ß√µes.</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">7. Verbo</h4>
                                                <p class="text-sm">Indica a√ß√£o, estado ou fen√¥meno. Modos: Indicativo (certeza), Subjuntivo (d√∫vida/desejo), Imperativo (ordem).</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">8. Preposi√ß√£o</h4>
                                                <p class="text-sm">Palavra invari√°vel que liga dois termos, subordinando o segundo ao primeiro. Ex: a, com, de, em, para.</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">9. Conjun√ß√£o</h4>
                                                <p class="text-sm">Liga ora√ß√µes ou termos de mesma fun√ß√£o. <strong class="text-red-400">Dica:</strong> O "que" √© conjun√ß√£o integrante se a ora√ß√£o iniciada por ele puder ser trocada por "ISSO".</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">10. Interjei√ß√£o</h4>
                                                <p class="text-sm">Expressa emo√ß√µes s√∫bitas. Ex: Ai!, Socorro!, Cuidado!.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            `
                        },
                        {
                            id: 'sintaxe-estrutura-periodo',
                            title: 'Sintaxe',
                            content: `
                                <div class="space-y-8">
                                    <!-- Introdu√ß√£o -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h2 class="text-2xl font-bold text-white mb-4 border-b border-slate-600 pb-2">Estrutura Morfossint√°tica do Per√≠odo</h2>
                                        <p class="text-slate-300 mb-4">A Sintaxe estuda a fun√ß√£o e a rela√ß√£o das palavras para formar sentidos. Vamos ver os conceitos fundamentais.</p>
                                        <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-center">
                                            <div class="bg-slate-800 p-3 rounded-md border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">Frase</h4>
                                                <p class="text-sm text-slate-400">Enunciado com sentido completo. Pode ou n√£o ter verbo. Ex: "Socorro!".</p>
                                            </div>
                                            <div class="bg-slate-800 p-3 rounded-md border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">Ora√ß√£o</h4>
                                                <p class="text-sm text-slate-400">Enunciado com verbo ou locu√ß√£o verbal. Ex: "O candidato estudou."</p>
                                            </div>
                                            <div class="bg-slate-800 p-3 rounded-md border border-slate-700">
                                                <h4 class="font-semibold text-amber-400">Per√≠odo</h4>
                                                <p class="text-sm text-slate-400">Frase com uma ou mais ora√ß√µes. Ex: "Ele estudou e passou."</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Sujeito -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">1. Termos Essenciais: O Sujeito</h3>
                                        <p class="text-slate-400 mb-4">√â o termo sobre o qual o verbo faz uma declara√ß√£o. Para ach√°-lo, pergunte ao verbo: "Quem √© que...?" ou "O que √© que...?".</p>
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md">
                                            <h4 class="font-semibold mb-2">üí° Aten√ß√£o para Concursos: Verbos Impessoais (Ora√ß√£o Sem Sujeito)!</h4>
                                            <p>Verbos que indicam fen√¥menos da natureza (<strong class="text-white">choveu</strong>), tempo decorrido (<strong class="text-white">faz</strong> duas semanas, <strong class="text-white">h√°</strong> meses) ou exist√™ncia (<strong class="text-white">haver</strong>) n√£o t√™m sujeito e ficam sempre na 3¬™ pessoa do singular. O verbo <strong class="text-white">existir</strong>, ao contr√°rio de <strong class="text-white">haver</strong>, tem sujeito e concorda com ele: "Devem <strong class="text-white">existir</strong> mais interessados."</p>
                                        </div>
                                    </div>

                                    <!-- Transitividade Verbal -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">2. Transitividade Verbal e Complementos</h3>
                                        <p class="text-slate-400 mb-4">Analisa se o verbo precisa de um complemento para ter sentido completo.</p>
                                        <ul class="list-disc list-inside space-y-2 text-slate-300">
                                            <li><strong class="text-amber-400">Verbo Intransitivo (VI):</strong> N√£o precisa de complemento. Ex: "O cora√ß√£o <strong class="text-white">dispara</strong>."</li>
                                            <li><strong class="text-amber-400">Verbo Transitivo Direto (VTD):</strong> Pede complemento sem preposi√ß√£o (Objeto Direto). Ex: "Vou roubando <strong class="text-white">as horas</strong>."</li>
                                            <li><strong class="text-amber-400">Verbo Transitivo Indireto (VTI):</strong> Pede complemento com preposi√ß√£o (Objeto Indireto). Ex: "Lembrei-me <strong class="text-white">do teu sabor</strong>."</li>
                                            <li><strong class="text-amber-400">Verbo de Liga√ß√£o (VL):</strong> Liga o sujeito a uma caracter√≠stica (Predicativo do Sujeito). Ex: "Tu <strong class="text-white">√©s</strong> trevo."</li>
                                        </ul>
                                    </div>
                                    
                                    <!-- Outros Termos -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h3 class="text-xl font-bold text-white mb-3">3. Outros Termos da Ora√ß√£o</h3>
                                        <div class="space-y-3">
                                            <p><strong class="text-amber-400">Adjunto Adnominal:</strong> Termo que acompanha um substantivo para caracteriz√°-lo. Ex: "<strong class="text-white">A melhor aula</strong> de portugu√™s..."</p>
                                            <p><strong class="text-amber-400">Adjunto Adverbial:</strong> Indica uma circunst√¢ncia (tempo, lugar, modo). Ex: "Entrei na rua dela <strong class="text-white">com meu carro</strong>."</p>
                                            <p><strong class="text-amber-400">Aposto:</strong> Explica, resume ou desenvolve outro termo. Ex: "Porto Alegre, <strong class="text-white">a cidade sorriso</strong>, aguarda voc√™."</p>
                                            <p><strong class="text-amber-400">Vocativo:</strong> Termo para chamar ou interpelar. Sempre separado por v√≠rgula. Ex: "Oh <strong class="text-white">Rita</strong>, volta..."</p>
                                        </div>
                                    </div>

                                    <!-- An√°lise Cr√≠tica -->
                                    <div class="content-card p-6 sm:p-8 border-yellow-500">
                                        <h3 class="text-xl font-bold text-yellow-400 mb-3">‚ö†Ô∏è An√°lise Cr√≠tica do Material de Apoio</h3>
                                        <p class="text-slate-400 mb-4">Notei poss√≠veis equ√≠vocos nos gabaritos de algumas quest√µes do material. √â crucial focar na regra gramatical correta. Por exemplo:</p>
                                        <ul class="list-disc list-inside space-y-2 text-slate-300">
                                            <li>Na frase "Cabia tudo em uma mala s√≥", o sujeito √© <strong class="text-white">"tudo"</strong> (O que cabia?).</li>
                                            <li>Em uma frase como "Tia Tula, o menino est√° aqui", <strong class="text-white">"Tia Tula"</strong> √© o sujeito, enquanto <strong class="text-white">"menino"</strong> seria um vocativo se estivesse sendo chamado. As fun√ß√µes s√£o diferentes.</li>
                                        </ul>
                                    </div>
                                </div>
                            `
                        },
                        {
                            id: 'concordancia-verbal-nominal',
                            title: 'Concord√¢ncia',
                            content: `
                                <div class="space-y-8">
                                    <!-- Concord√¢ncia Verbal -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h2 class="text-2xl font-bold text-white mb-4 border-b border-slate-600 pb-2">Parte 1: Concord√¢ncia Verbal</h2>
                                        <p class="text-slate-300 mb-4">A regra geral √© que o verbo concorda em n√∫mero e pessoa com o n√∫cleo do sujeito. Ex: "<strong>Existem</strong> <strong class="text-amber-400">momentos</strong> na vida...".</p>
                                        
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md mb-6">
                                            <h4 class="font-semibold mb-2">üí° Caso Especial: Verbo HAVER</h4>
                                            <p>No sentido de <strong>existir, ocorrer ou acontecer</strong>, o verbo HAVER √© impessoal, ficando sempre no singular. Ex: "<strong>Houve</strong> um assalto" / "<strong>Deve haver</strong> muitas vagas."</p>
                                        </div>

                                        <h4 class="font-semibold text-lg text-white mb-3">A Part√≠cula "SE"</h4>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                            <div class="bg-slate-800 p-4 rounded-md border border-slate-700">
                                                <h5 class="font-bold text-amber-400">Part√≠cula Apassivadora (PA)</h5>
                                                <p class="text-sm mt-1">Ocorre com VTD ou VTDI. O verbo concorda com o sujeito paciente. Ex: "Alugam-<strong>se</strong> <strong class="text-white">quartos</strong>" (Quartos s√£o alugados).</p>
                                            </div>
                                            <div class="bg-slate-800 p-4 rounded-md border border-slate-700">
                                                <h5 class="font-bold text-amber-400">√çndice de Indetermina√ß√£o do Sujeito (IIS)</h5>
                                                <p class="text-sm mt-1">Ocorre com VTI, VI ou VL. O verbo fica sempre no singular. Ex: "Precisa-<strong>se</strong> de ajuda."</p>
                                            </div>
                                        </div>
                                    </div>

                                    <!-- Concord√¢ncia Nominal -->
                                    <div class="content-card p-6 sm:p-8">
                                        <h2 class="text-2xl font-bold text-white mb-4 border-b border-slate-600 pb-2">Parte 2: Concord√¢ncia Nominal</h2>
                                        <p class="text-slate-300 mb-4">√â a harmonia entre o substantivo e as palavras que a ele se referem (artigos, adjetivos, etc.).</p>
                                        
                                        <div class="bg-red-900/50 border border-red-700 text-red-200 p-4 rounded-md">
                                            <h4 class="font-semibold mb-2">üí° Casos Espec√≠ficos Cobrados em Prova</h4>
                                            <ul class="list-disc list-inside text-sm space-y-1">
                                                <li><strong>Anexo, Obrigado:</strong> Concordam com o substantivo/pessoa. "Cartas anexas", "Muito obrigada", disse ela.</li>
                                                <li><strong>Bastante, Meio:</strong> Como adjetivos, variam ("bastantes flores", "meia colher"). Como adv√©rbios, s√£o invari√°veis ("estudei bastante", "meio aberta").</li>
                                                <li><strong>√â bom, √â proibido:</strong> Ficam invari√°veis se o sujeito n√£o tiver determinante. Variam se tiver. Ex: "Entrada √© proibido" vs. "<strong class="text-white">A</strong> entrada √© proibida".</li>
                                            </ul>
                                        </div>
                                    </div>
                                    
                                    <!-- An√°lise Cr√≠tica -->
                                    <div class="content-card p-6 sm:p-8 border-yellow-500">
                                        <h3 class="text-xl font-bold text-yellow-400 mb-3">‚ö†Ô∏è An√°lise Cr√≠tica do Material de Apoio</h3>
                                        <p class="text-slate-400 mb-4">Aten√ß√£o aos gabaritos do material de origem, que podem conter equ√≠vocos. A an√°lise correta das regras gramaticais √© fundamental:</p>
                                        <ul class="list-disc list-inside space-y-2 text-slate-300">
                                            <li>Em "classificou-se as 50 maiores cidades", o correto seria <strong class="text-white">"classificaram-se"</strong>, pois o verbo concorda com o sujeito paciente "as 50 maiores cidades".</li>
                                            <li>Em "...que se promova novos estudos", o correto seria <strong class="text-white">"promovam-se"</strong>, concordando com "novos estudos".</li>
                                        </ul>
                                    </div>
                                </div>
                            `
                        }
                    ] 
                },
                { id: 'rlm', name: 'RLM', summaries: [] },
                { id: 'informatica', name: 'Inform√°tica', summaries: [] },
                { id: 'fisica', name: 'F√≠sica', summaries: [] },
                { id: 'etica', name: '√âtica', summaries: [] },
                { id: 'geopolitica', name: 'Geopol√≠tica', summaries: [] },
                { id: 'espanhol', name: 'Espanhol', summaries: [] },
                { id: 'legislacao-de-transito', name: 'Legisla√ß√£o de Tr√¢nsito', summaries: [] },
                { id: 'direito-administrativo', name: 'Direito Administrativo', summaries: [] },
                { id: 'direito-penal', name: 'Direito Penal', summaries: [] },
                {
                    id: 'direito-constitucional',
                    name: 'Direito Constitucional',
                    summaries: [
                        {
                            id: 'remedios-constitucionais',
                            title: 'Rem√©dios Constitucionais V',
                            content: `
                                <div class="space-y-8">
                                    <!-- Conte√∫do do resumo de Rem√©dios Constitucionais aqui -->
                                </div>
                            `
                        }
                    ]
                },
                { id: 'direito-processual-penal', name: 'Direito Processual Penal', summaries: [] },
                { id: 'legislacoes-especiais', name: 'Legisla√ß√µes Especiais', summaries: [] },
                { id: 'direitos-humanos', name: 'Direitos Humanos', summaries: [] },
                { id: 'redacao', name: 'Reda√ß√£o', summaries: [] }
            ]
        };

        // --- L√ìGICA DA APLICA√á√ÉO ---
        const subjectNav = document.getElementById('subject-nav');
        const contentArea = document.getElementById('content-area');
        const mainTitle = document.getElementById('main-title');
        const upcomingReviewsList = document.getElementById('upcoming-reviews-list');
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const sidebar = document.getElementById('sidebar');
        const mobileOverlay = document.getElementById('mobile-overlay');
        let activeLink = null;

        function toggleSidebar() {
            sidebar.classList.toggle('-translate-x-full');
            mobileOverlay.classList.toggle('hidden');
        }

        mobileMenuButton.addEventListener('click', toggleSidebar);
        mobileOverlay.addEventListener('click', toggleSidebar);

        function formatDate(date) {
            return new Intl.DateTimeFormat('pt-BR').format(date);
        }

        function updateUpcomingReviews() {
            let allUpcomingReviews = [];
            const today = new Date();
            today.setHours(0, 0, 0, 0);

            studyData.subjects.forEach(subject => {
                subject.summaries.forEach(summary => {
                    const key = `reviews_${subject.id}_${summary.id}`;
                    const reviews = JSON.parse(localStorage.getItem(key)) || [];
                    if (reviews.length > 0) {
                        const lastReviewDate = new Date(reviews[reviews.length - 1]);
                        const schedule = [1, 7, 30];
                        schedule.forEach(days => {
                            const nextReviewDate = new Date(lastReviewDate);
                            nextReviewDate.setDate(nextReviewDate.getDate() + days);
                            if (nextReviewDate >= today) {
                                allUpcomingReviews.push({
                                    date: nextReviewDate,
                                    title: summary.title
                                });
                            }
                        });
                    }
                });
            });

            allUpcomingReviews.sort((a, b) => a.date - b.date);
            
            upcomingReviewsList.innerHTML = '';
            if (allUpcomingReviews.length === 0) {
                upcomingReviewsList.innerHTML = '<li class="px-2 text-slate-500">Nenhuma revis√£o agendada.</li>';
            } else {
                allUpcomingReviews.slice(0, 5).forEach(review => { // Mostra apenas as 5 pr√≥ximas
                    const li = document.createElement('li');
                    li.className = 'px-2 py-1 rounded-md bg-slate-700/50';
                    li.innerHTML = `<span class="font-bold text-amber-400">${formatDate(review.date)}:</span><br><span class="text-slate-300">${review.title}</span>`;
                    upcomingReviewsList.appendChild(li);
                });
            }
        }

        function updateReviewDisplay(subjectId, summaryId, container) {
            const key = `reviews_${subjectId}_${summaryId}`;
            const reviews = JSON.parse(localStorage.getItem(key)) || [];
            
            const historyList = container.querySelector('#review-history');
            const scheduleList = container.querySelector('#review-schedule');

            historyList.innerHTML = '';
            scheduleList.innerHTML = '';

            if (reviews.length === 0) {
                historyList.innerHTML = '<li class="text-slate-400">Nenhuma revis√£o registrada.</li>';
                scheduleList.innerHTML = '<li class="text-slate-400">Marque a primeira revis√£o para ver as pr√≥ximas.</li>';
                return;
            }

            reviews.forEach(reviewDateISO => {
                const li = document.createElement('li');
                li.textContent = `Revisado em: ${formatDate(new Date(reviewDateISO))}`;
                historyList.appendChild(li);
            });

            const lastReviewDate = new Date(reviews[reviews.length - 1]);
            const schedule = [
                { label: 'Revis√£o 1 (24h)', days: 1 },
                { label: 'Revis√£o 2 (7 dias)', days: 7 },
                { label: 'Revis√£o 3 (30 dias)', days: 30 }
            ];

            schedule.forEach(item => {
                const nextReviewDate = new Date(lastReviewDate);
                nextReviewDate.setDate(nextReviewDate.getDate() + item.days);
                const li = document.createElement('li');
                li.innerHTML = `${item.label}: <strong class="text-amber-400">${formatDate(nextReviewDate)}</strong>`;
                scheduleList.appendChild(li);
            });
        }

        function markAsReviewed(subjectId, summaryId) {
            const key = `reviews_${subjectId}_${summaryId}`;
            let reviews = JSON.parse(localStorage.getItem(key)) || [];
            const today = new Date().toISOString().split('T')[0]; 
            
            const lastReviewDate = reviews.length > 0 ? reviews[reviews.length - 1].split('T')[0] : null;
            if (lastReviewDate !== today) {
                reviews.push(new Date().toISOString());
                localStorage.setItem(key, JSON.stringify(reviews));
            }
            
            const trackerContainer = document.getElementById('review-tracker');
            updateReviewDisplay(subjectId, summaryId, trackerContainer);
            updateUpcomingReviews(); // Atualiza a barra lateral
        }

        function createReviewTracker(subjectId, summaryId) {
            const container = document.createElement('div');
            container.id = 'review-tracker';
            container.className = 'content-card p-6 sm:p-8 mt-8';
            
            container.innerHTML = `
                <h3 class="text-xl font-bold mb-4 text-center text-white">Controle de Revis√£o Espa√ßada</h3>
                <div class="text-center mb-6">
                    <button id="review-btn" class="review-btn px-6 py-2 rounded-md">Marcar como Revisado Hoje</button>
                </div>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                        <h4 class="font-semibold text-center text-slate-300 mb-2">üóìÔ∏è Hist√≥rico de Revis√µes</h4>
                        <ul id="review-history" class="text-center text-sm space-y-1"></ul>
                    </div>
                    <div class="bg-slate-800 p-4 rounded-lg border border-slate-700">
                        <h4 class="font-semibold text-center text-slate-300 mb-2">üîî Pr√≥ximas Revis√µes Agendadas</h4>
                        <ul id="review-schedule" class="text-center text-sm space-y-1"></ul>
                    </div>
                </div>
            `;
            
            container.querySelector('#review-btn').onclick = () => markAsReviewed(subjectId, summaryId);
            updateReviewDisplay(subjectId, summaryId, container);
            return container;
        }

        function displayContent(subjectId, summaryId) {
            const subject = studyData.subjects.find(s => s.id === subjectId);
            if (!subject) return;

            const summary = subject.summaries.find(su => su.id === summaryId);
            if (!summary) {
                 mainTitle.textContent = subject.name;
                 contentArea.innerHTML = `
                    <div class="content-card p-8 text-center">
                        <span class="text-5xl">üìÇ</span>
                        <h3 class="text-2xl font-bold mt-4 text-white">Nenhum resumo aqui ainda</h3>
                        <p class="mt-2 text-slate-400">Adicione seu primeiro resumo para esta mat√©ria.</p>
                    </div>`;
                return;
            }

            mainTitle.textContent = summary.title;
            contentArea.innerHTML = summary.content;
            
            const reviewTracker = createReviewTracker(subjectId, summaryId);
            contentArea.appendChild(reviewTracker);
        }

        function toggleDetails(elementId) {
            const element = document.getElementById(elementId);
            if (element.style.display === 'block') {
                element.style.display = 'none';
            } else {
                element.style.display = 'block';
            }
        }

        function buildNav() {
            subjectNav.innerHTML = '';
            studyData.subjects.forEach(subject => {
                const subjectContainer = document.createElement('div');

                const subjectHeader = document.createElement('div');
                subjectHeader.className = 'subject-header flex justify-between items-center p-2 rounded-md';
                
                const subjectTitle = document.createElement('h3');
                subjectTitle.className = 'text-base font-semibold text-slate-300';
                subjectTitle.textContent = subject.name;

                const arrow = document.createElement('span');
                arrow.className = 'text-slate-400 transition-transform duration-300';
                arrow.innerHTML = '&#9654;'; // Right arrow

                subjectHeader.appendChild(subjectTitle);
                
                const summaryList = document.createElement('div');
                summaryList.className = 'mt-1 space-y-1 pl-4 hidden';

                if (subject.summaries.length > 0) {
                    subjectHeader.appendChild(arrow);
                    subject.summaries.forEach(summary => {
                        const link = document.createElement('a');
                        link.href = '#';
                        link.className = 'sidebar-link block rounded-md px-3 py-2 text-sm font-medium';
                        link.textContent = summary.title;
                        link.onclick = (e) => {
                            e.preventDefault();
                            e.stopPropagation(); 
                            if (activeLink) {
                                activeLink.classList.remove('sidebar-link-active');
                            }
                            link.classList.add('sidebar-link-active');
                            activeLink = link;
                            displayContent(subject.id, summary.id);
                            if (window.innerWidth < 768) { // md breakpoint
                                toggleSidebar();
                            }
                        };
                        summaryList.appendChild(link);
                    });
                }
                
                subjectHeader.onclick = () => {
                    if (subject.summaries.length > 0) {
                        const isHidden = summaryList.classList.contains('hidden');
                        if (isHidden) {
                            summaryList.classList.remove('hidden');
                            arrow.style.transform = 'rotate(90deg)';
                        } else {
                            summaryList.classList.add('hidden');
                            arrow.style.transform = 'rotate(0deg)';
                        }
                    } else {
                        if (activeLink) {
                            activeLink.classList.remove('sidebar-link-active');
                            activeLink = null;
                        }
                        displayContent(subject.id, null);
                        if (window.innerWidth < 768) {
                            toggleSidebar();
                        }
                    }
                };
                
                subjectContainer.appendChild(subjectHeader);
                subjectContainer.appendChild(summaryList);
                subjectNav.appendChild(subjectContainer);
            });
        }


        document.addEventListener('DOMContentLoaded', () => {
            buildNav();
            updateUpcomingReviews();
        });
    </script>
</body>
</html>
